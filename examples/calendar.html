<html>
	<head>
	  <title>Backbone.d3 - Calendar</title>

	  <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="scripts/jquery.js" type='text/javascript'> </script>
    <script src="scripts/underscore-min.js" type="text/javascript"> </script>
    <script src="scripts/backbone.js" type="text/javascript"> </script>
    <script src="scripts/d3.min.js" type="text/javascript"> </script>
    <script src="scripts/d3.layout.min.js" type="text/javascript"> </script>
    <script src="../backbone-d3.js" type="text/javascript"> </script>
    <script type="text/javascript">
      $(function() {
        var DataPoint = Backbone.Model.extend({
          initialize: function(event) {
            this.set({
              date: event.date,
              count: event.count
            });
          }
        });

        var DataSeries = Backbone.d3.PlotCollection.extend({
          model : DataPoint,
          url : "bardata.json",
          // Needed for scolling plots
          size: 5,
          plotdata: function(){
            var data = [];
            this.forEach(function(datapoint) {
                data.push({x:datapoint.get('date'), y:datapoint.get('count')});
              }
            )
            // Needed for scolling plots
            return _.last(data, this.size);
          }
        });

        var plot1 = Backbone.d3.getView(series1, {div:'#calendar'});

			});
		</script>
	  </head>
	  <body>
	    <div id="container">
	      <h1>Calendar</h1>
	      <p>The data used here is summarised FAA plane crash data from
<a href='http://data.gov/'>data.gov</a> that I got from Mike Miller of
<a href="http://blog.cloudant.com/mapreduce-from-the-basics-to-the-actually-useful/">Cloudant</a>.
I munged it up so it's just date:number of crashes. The data is unsorted. See
<a href="calendar.json">calendar.json</a> for the details.</p>
	      <div id="calendar"></div>
	      <div class="footer">
		      <p><a href="index.html">Index</a></p>
		    </div>
	    </div>
	  </body>
	</html>
